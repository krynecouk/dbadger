-- library
CREATE
DATABASE library;
\connect library;
CREATE
USER library_admin WITH LOGIN SUPERUSER PASSWORD 'library_admin';
GRANT ALL PRIVILEGES ON DATABASE
library TO library_admin;
CREATE TABLE book
(
    id   INT GENERATED BY DEFAULT AS IDENTITY,
    name VARCHAR NOT NULL,
    year SMALLINT,
    lang VARCHAR(2),
    PRIMARY KEY (id)
);

CREATE TABLE author
(
    id   INT GENERATED BY DEFAULT AS IDENTITY,
    name VARCHAR NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE book_author
(
    book_id   INT REFERENCES book,
    author_id INT REFERENCES author
);

INSERT INTO book(id, name, "year", lang)
VALUES (1, 'Brave New World', 1932, 'en'),
       (2, 'Návrat z hvězd', 2011, 'cs'),
       (3, 'Total Recall', 2013, 'en'),
       (4, 'Nadechnout se', 2019, 'cs');

INSERT INTO author(id, name)
VALUES (1, 'Aldous Huxley'),
       (2, 'Stanisław Lem'),
       (3, 'Arnold Schwarzenegger'),
       (4, 'George Orwell');

INSERT INTO book_author(book_id, author_id)
VALUES (1, 1),
       (2, 2),
       (3, 3),
       (4, 4);

-- school
CREATE
DATABASE school;
\connect school;
CREATE
USER school_admin WITH LOGIN SUPERUSER PASSWORD 'school_admin';
GRANT ALL PRIVILEGES ON DATABASE
school TO school_admin;
CREATE TABLE student
(
    id    INT GENERATED BY DEFAULT AS IDENTITY,
    name  VARCHAR  NOT NULL,
    birth SMALLINT NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE course
(
    id   INT GENERATED BY DEFAULT AS IDENTITY,
    name VARCHAR NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE student_course
(
    student_id INT REFERENCES student,
    course_id  INT REFERENCES course
);

INSERT INTO student(id, name, birth)
VALUES (1, 'Petr Jurka', 1989),
       (2, 'Miloš Křepelka', 1988),
       (3, 'Aleš Kuchař', 1988),
       (4, 'Lukáš Křepelka', 1990);

INSERT INTO course(id, name)
VALUES (1, 'Business Management'),
       (2, 'Human Resources'),
       (3, 'Atmospheric Physics'),
       (4, 'Quality Management');

INSERT INTO student_course(student_id, course_id)
VALUES (1, 1),
       (2, 2),
       (3, 3),
       (4, 4);
